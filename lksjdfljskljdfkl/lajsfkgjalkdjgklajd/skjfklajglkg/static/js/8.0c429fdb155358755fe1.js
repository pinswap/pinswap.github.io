webpackJsonp([8],{ufbI:function(e,t){},y4DY:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("d7EF"),n=r.n(i),o={data:function(){return{form:{address:"",price:"",decimals:""},hjzPrice:0,hjzDecimals:0,blccPrice:0,blccDecimals:0,options:["HJZ","BLCC"]}},created:function(){this.$Relation&&this.init()},methods:{change:function(e){"HJZ"===e?(this.form.price=this.hjzPrice,this.form.decimals=this.hjzDecimals):(this.form.price=this.blccPrice,this.form.decimals=this.blccDecimals)},toSun:function(e,t){return window.tronWeb.toBigNumber(e).multipliedBy(window.tronWeb.toBigNumber("10").exponentiatedBy(t.toString())).toString()},fromSun:function(e,t){return window.tronWeb.toBigNumber(e).dividedBy(window.tronWeb.toBigNumber("10").exponentiatedBy(t.toString())).toString()},init:function(){var e=this;window.tronWeb.transactionBuilder.triggerConstantContract(this.$Community.address,"getTokenPrice(address)",{},[{type:"address",value:"TWaXN3vowEYxGB9TscyrdN2MDXUE2gaVwT"}],window.tronWeb.defaultAddress.base58).then(function(t){var r=window.tronWeb.utils.abi.decodeParams(["uint","uint"],"0x"+t.constant_result[0]),i=n()(r,2),o=i[0],s=i[1];e.hjzPrice=e.fromSun(o.toString(),s.toString()),e.hjzDecimals=s.toString()}),window.tronWeb.transactionBuilder.triggerConstantContract(this.$Community.address,"getTokenPrice(address)",{},[{type:"address",value:"TWiwW8LXpS64oF3mtzz3LYQMb3P3TRnFas"}],window.tronWeb.defaultAddress.base58).then(function(t){var r=window.tronWeb.utils.abi.decodeParams(["uint","uint"],"0x"+t.constant_result[0]),i=n()(r,2),o=i[0],s=i[1];e.blccPrice=e.fromSun(o.toString(),s.toString()),e.blccDecimals=s.toString()})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;var r="HJZ"===e.form.address?"TWaXN3vowEYxGB9TscyrdN2MDXUE2gaVwT":"TWiwW8LXpS64oF3mtzz3LYQMb3P3TRnFas";e.$Community.setTokenPrice(r,e.toSun(e.form.price,e.form.decimals),e.form.decimals).send().then(function(t){e.$loading(t).then(function(t){t&&e.$refs.form.resetFields()})})})}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px","label-position":"top"}},[r("el-form-item",{attrs:{prop:"address",label:"代币",rules:{required:!0,message:"代币不能为空"}}},[r("el-select",{attrs:{placeholder:"--请选择代币--"},on:{change:e.change},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}},e._l(e.options,function(e){return r("el-option",{key:e,attrs:{value:e}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"price",label:"价格",rules:{required:!0,message:"价格不能为空"}}},[r("el-input",{attrs:{type:"number"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"decimals",label:"精度"}},[r("el-input",{attrs:{type:"number",readonly:""},model:{value:e.form.decimals,callback:function(t){e.$set(e.form,"decimals",t)},expression:"form.decimals"}})],1),e._v(" "),r("el-form-item",{staticClass:"bottomButton"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var a=r("VU/8")(o,s,!1,function(e){r("ufbI")},"data-v-5d802712",null);t.default=a.exports}});