(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["join-fund-pool"],{"0abd":function(t,e,n){"use strict";n("869d")},1500:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"join-fund-pool"},[s("mk-navbar",{attrs:{title:t.$t("joinFundPool.text1")}}),s("div",{staticClass:"container-box"},[s("div",{staticClass:"form-container"},[s("div",{staticClass:"tokens"},[s("div",{staticClass:"token"},[t._m(0),s("span",{domProps:{textContent:t._s(t.$t("joinFundPool.text2"))}}),s("span",[t._v(t._s(t.trx))])]),s("div",{staticClass:"logos"},[s("img",{attrs:{src:n("90bd")}}),s("img",{directives:[{name:"show",rawName:"v-show",value:t.tokenInfo.tokenLogoUrl,expression:"tokenInfo.tokenLogoUrl"}],attrs:{src:t.tokenInfo.tokenLogoUrl}})]),s("div",{staticClass:"token"},[s("div",{staticClass:"symbol select",on:{click:t.openSearch}},[s("span",[t._v(t._s(t.tokenInfo.tokenSymbol||t.$t("joinFundPool.text3")))]),s("img",{attrs:{src:n("716f")}})]),s("span",{domProps:{textContent:t._s(t.$t("joinFundPool.text2"))}}),s("span",[t._v(t._s(t.token))])])]),s("div",{staticClass:"inputs"},[s("van-field",{attrs:{type:"number",placeholder:t.$t("joinFundPool.text4")},on:{input:t.inputTRX},model:{value:t.assets1,callback:function(e){t.assets1=e},expression:"assets1"}}),s("span",[t._v("+")]),s("van-field",{attrs:{type:"number",placeholder:t.$t("joinFundPool.text4")},on:{input:t.inputToken},model:{value:t.assets2,callback:function(e){t.assets2=e},expression:"assets2"}})],1),s("div",{staticClass:"rate"},[s("div",[s("span",{directives:[{name:"show",rawName:"v-show",value:!t.rateChanged,expression:"!rateChanged"}]},[t._v(t._s(t.$t("joinFundPool.text5"))+" 1TRX = "+t._s(t.rate)+t._s(t.tokenInfo.tokenSymbol))]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.rateChanged,expression:"rateChanged"}]},[t._v(t._s(t.$t("joinFundPool.text5"))+" 1"+t._s(t.tokenInfo.tokenSymbol)+" = "+t._s(t.rate)+"TRX")]),s("img",{attrs:{src:n("1b07")},on:{click:t.switchRate}})]),s("span",[t._v(t._s(t.$t("joinFundPool.text6"))+" "+t._s(t.prop))])]),s("van-button",{attrs:{type:"info"},on:{click:t.addLiquidity}},[t._v(t._s(t.$t("joinFundPool.text7")))])],1),t._l(t.list,(function(e){return s("div",{key:e.address,staticClass:"your-share"},[s("div",{staticClass:"title"},[s("div",{staticClass:"text"},[s("span",{domProps:{textContent:t._s(t.$t("joinFundPool.text8"))}}),s("span",[t._v(t._s(e.myShare)+"%")])]),s("div",{staticClass:"collection"},[s("van-icon",{attrs:{name:"star-o"}}),s("span",{domProps:{textContent:t._s(t.$t("joinFundPool.text9"))}})],1)]),s("div",{staticClass:"tokens"},[s("div",{staticClass:"logos"},[s("img",{attrs:{src:n("90bd")}}),s("img",{attrs:{src:e.logo}})]),s("span",[t._v("TRX/"+t._s(e.symbol))])]),s("div",{staticClass:"redemption"},[s("div",{staticClass:"text"},[s("span",[t._v("TRX "+t._s(e.trx))]),s("span",[t._v(t._s(e.symbol)+" "+t._s(e.token))]),s("span",[t._v(t._s(t.$t("joinFundPool.text10"))+" "+t._s(e.lp))])]),s("van-button",{attrs:{type:"info"},on:{click:function(n){t.$router.push({path:"/redemption",query:{info:JSON.stringify(e)}})}}},[t._v(t._s(t.$t("joinFundPool.text11")))])],1)])}))],2),s("search-tokens",{ref:"searchTokens",on:{select:t.select}})],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"symbol"},[n("span",[t._v("TRX")])])}],a=(n("99af"),n("4de4"),n("d81d"),n("a9e3"),n("b680"),n("d3b7"),n("25f0"),n("96cf"),n("1da1")),r=n("aca7"),i=n("a981"),u=n("3952"),d={components:{"mk-navbar":function(){return Promise.all([n.e("join-fund-pool~transaction"),n.e("join-fund-pool")]).then(n.bind(null,"0861"))},"search-tokens":function(){return Promise.all([n.e("join-fund-pool~transaction"),n.e("join-fund-pool")]).then(n.bind(null,"bab4"))}},data:function(){return{assets1:"",assets2:"",list:[],tokenInfo:{},trx:"--",token:"--",rate:"--",prop:"--",exTrxBalance:0,exTokenBalace:0,totalLiquidity:0,contract:null,trxInputing:!1,tokenInputing:!1,allowance:0,rateChanged:!1}},created:function(){this.$utils&&this.init()},methods:{openSearch:function(){this.$refs.searchTokens.open()},select:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var s,o,a,r,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s=t.token,"TRX"!==s.tokenSymbol){n.next=3;break}return n.abrupt("return",vant.Toast.fail(e.$t("joinFundPool.text12")));case 3:return e.tokenInfo=s,e.contract=tronWeb.contract(i,s.address),n.next=7,e.$utils.call({contractAddress:s.tokenAddress,method:"balanceOf(address)",parameter:[{type:"address",value:e.$address}]});case 7:return e.token=n.sent.constant_result[0].decode(["uint256"]).toString().fromSun(s.tokenDecimal),n.next=10,e.$utils.call({contractAddress:"TCNYd8L5hBey9FwPpvgtvDaY2cHjMFVLZu",method:"getSingleInfo(address,address)",parameter:[{type:"address",value:e.$address},{type:"address",value:s.tokenAddress}]});case 10:o=n.sent.constant_result[0].decode(["address","uint256","uint256","uint256","uint256","uint256","uint256","uint256"],["_exchangeAddr","_allowance","_exTokenBalace","_exTrxBalance","_totalLiquidity","_userUniAmount","_userTrxAmount","_userTokenAmount"]),a=o._exTrxBalance,r=o._exTokenBalace,u=o._totalLiquidity,d=o._allowance,e.exTrxBalance=a.toString().toBN(),e.exTokenBalace=r.toString().toBN(),e.totalLiquidity=u.toString().toBN(),e.allowance=d.toString().fromSun(s.tokenDecimal),e.rate="1".toSun().toBN().multipliedBy(e.exTokenBalace).div(e.exTrxBalance).toString().fromSun(e.tokenInfo.tokenDecimal);case 20:case"end":return n.stop()}}),n)})))()},addLiquidity:function(){var t=this;if(this.trx<Number(this.assets1))return vant.Toast.fail("TRX"+this.$t("joinFundPool.text13"));if(this.token<Number(this.assets2))return vant.Toast.fail("".concat(this.tokenInfo.tokenSymbol).concat(this.$t("joinFundPool.text13")));if(this.allowance<Number(this.assets2))return this.approve();var e=Math.floor((new Date).getTime()/1e3)+600;this.list.length>0&&this.contract.addLiquidity(this.assets1.toSun().toBN().div(this.exTrxBalance.plus(this.assets1.toSun().toBN())).multipliedBy(this.totalLiquidity).toFixed(0),this.assets1.toSun().toBN().multipliedBy(this.exTokenBalace).div(this.exTrxBalance).toFixed(0),e).send({callValue:this.assets1.toSun()}).then((function(e){return t.$loading(e)}))},approve:function(){var t=this,e=tronWeb.contract(u,this.tokenInfo.tokenAddress);e.approve(this.tokenInfo.address,this.assets2.toSun(this.tokenInfo.tokenDecimal)).send().then(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$loading(n);case 2:if(s=e.sent,!s){e.next=8;break}return e.next=6,t.$utils.call({contractAddress:t.tokenInfo.tokenAddress,method:"allowance(address,address)",parameter:[{type:"address",value:t.$address},{type:"address",value:t.tokenInfo.address}]});case 6:t.allowance=e.sent.constant_result[0].decode(["uint256"]).toString().fromSun(t.tokenInfo.tokenDecimal),t.addLiquidity();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},switchRate:function(){if(!this.tokenInfo.address)return vant.Toast.fail(this.$t("joinFundPool.text14"));this.rateChanged=!this.rateChanged,this.rateChanged?this.rate="1".toSun(this.tokenInfo.tokenDecimal).toBN().multipliedBy(this.exTrxBalance).div(this.exTokenBalace).toString().fromSun().toFixed(6):this.rate="1".toSun().toBN().multipliedBy(this.exTokenBalace).div(this.exTrxBalance).toString().fromSun(this.tokenInfo.tokenDecimal)},inputTRX:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.tokenInputing){e.next=2;break}return e.abrupt("return",t.tokenInputing=!1);case 2:if(""!==t.assets1){e.next=6;break}return t.assets2="",t.prop="--",e.abrupt("return",!1);case 6:t.trxInputing=!0,n=setTimeout(Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.assets1.length>0&&(t.assets2=t.assets1.toSun().toBN().multipliedBy(t.exTokenBalace).div(t.exTrxBalance).toString().fromSun(t.tokenInfo.tokenDecimal)),clearTimeout(n);case 2:case"end":return e.stop()}}),e)}))),1e3),s=t.assets1.toSun().toBN(),t.prop="".concat(s.div(t.exTrxBalance.plus(s)).multipliedBy("100".toBN()).toString().toFixed(6),"%");case 10:case"end":return e.stop()}}),e)})))()},inputToken:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.trxInputing){e.next=2;break}return e.abrupt("return",t.trxInputing=!1);case 2:if(""!==t.assets2){e.next=6;break}return t.assets1="",t.prop="--",e.abrupt("return",!1);case 6:t.tokenInputing=!0,n=setTimeout(Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.assets2.length>0&&(t.assets1=t.assets2.toSun(t.tokenInfo.tokenDecimal).toBN().multipliedBy(t.exTrxBalance).div(t.exTokenBalace).toString().fromSun().toFixed(6)),clearTimeout(n);case 2:case"end":return e.stop()}}),e)}))),1e3),s=t.assets1.toSun().toBN(),t.prop="".concat(s.div(t.exTrxBalance.plus(s)).multipliedBy("100".toBN()).toString().toFixed(6),"%");case 10:case"end":return e.stop()}}),e)})))()},init:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,s,o,a,i,u,d,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,tronWeb.trx.getBalance(t.$address);case 2:return t.trx=e.sent.fromSun(),e.next=5,Object(r["c"])(t.$address);case 5:return n=e.sent.data.liquidityList.filter((function(t){return t.jswapBalance>0})),s=n.map((function(t){return t.address})),e.next=9,t.$utils.call({contractAddress:"TCNYd8L5hBey9FwPpvgtvDaY2cHjMFVLZu",method:"getPool(address,address[])",parameter:[{type:"address",value:t.$address},{type:"address[]",value:s}]});case 9:for(o=e.sent.constant_result[0].decode(["uint256[]","uint256[]","uint256[]","uint256[]"],["_token","_trx","_uniToken","_totalsupply"]),a=o._token,i=o._trx,u=o._uniToken,d=o._totalsupply,c=[],l=0;l<s.length;l++)c.push({logo:n[l].tokenLogoUrl,symbol:n[l].tokenSymbol,token:a[l].toString().fromSun(n[l].tokenDecimal),trx:i[l].toString().fromSun(),lp:u[l].toString().fromSun(),myShare:u[l].toString().toBN().div(d[l].toString().toBN()).multipliedBy("100".toBN()).toString().toFixed(2),address:n[l].address,tokenAddress:n[l].tokenAddress,tokenDecimal:n[l].tokenDecimal});t.list=c;case 17:case"end":return e.stop()}}),e)})))()}}},c=d,l=c,p=(n("0abd"),n("2877")),m=Object(p["a"])(l,s,o,!1,null,"34c49214",null);e["default"]=m.exports},"2a1b":function(t,e,n){},4797:function(t,e){},"4d7b":function(t,e,n){"use strict";n("2a1b")},8397:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbarBox"},[n("mkNavbar",{attrs:{title:t.$t("aboutPin.text1")}}),n("div",{staticClass:"AboutPin"},[n("div",[t._m(0),n("div",{staticClass:"content"},[n("span",{domProps:{textContent:t._s(t.$t("aboutPin.text1"))}}),n("pre",{domProps:{textContent:t._s(t.$t("aboutPin.text2"))}}),n("table",{attrs:{border:"1",cellspacing:"0"}},[n("tr",[n("th",{domProps:{textContent:t._s(t.$t("aboutPin.text3"))}}),n("th",[t._v(t._s(t.$t("aboutPin.text4"))),n("br"),t._v(t._s(t.$t("aboutPin.text5")))]),n("th",{domProps:{textContent:t._s(t.$t("aboutPin.text6"))}}),n("th",{domProps:{textContent:t._s(t.$t("aboutPin.text7"))}})]),n("tr",[n("td",{domProps:{textContent:t._s(t.$t("aboutPin.text8"))}}),n("td",[t._v("1000")]),n("td",[t._v("359")]),n("td",[t._v("4580")])]),n("tr",[n("td",{domProps:{textContent:t._s(t.$t("aboutPin.text9"))}}),n("td",[t._v("2290")]),n("td",[t._v("274")]),n("td",[t._v("5020")])]),n("tr",[n("td",{domProps:{textContent:t._s(t.$t("aboutPin.text10"))}}),n("td",[t._v("2510")]),n("td",[t._v("263")]),n("td",[t._v("5130")])]),n("tr",[n("td",{domProps:{textContent:t._s(t.$t("aboutPin.text11"))}}),n("td",[t._v("2565")]),n("td",[t._v("260")]),n("td",[t._v("5155")])]),n("tr",[n("td",{domProps:{textContent:t._s(t.$t("aboutPin.text12"))}}),n("td",[t._v("2580")]),n("td",[t._v("259")]),n("td",[t._v("5160")])]),n("tr",[n("td",{domProps:{textContent:t._s(t.$t("aboutPin.text13"))}}),n("td",[t._v("2580")]),n("td",[t._v("259")]),n("td",[t._v("5160")])])]),n("pre",{domProps:{textContent:t._s(t.$t("aboutPin.text14"))}})])])])],1)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title van-hairline--bottom"},[s("img",{attrs:{src:n("42d3")}}),s("i",[t._v("Pin"),s("span",[t._v("Swap")])])])}],a=n("4797"),r=n.n(a),i=r.a,u=i,d=(n("4d7b"),n("2877")),c=Object(d["a"])(u,s,o,!1,null,"2b219b30",null);e["default"]=c.exports},"869d":function(t,e,n){}}]);