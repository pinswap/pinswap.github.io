(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["join-fund-pool"],{1500:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"join-fund-pool"},[a("mk-navbar",{attrs:{title:"加入资金池"}}),a("div",{staticClass:"container-box"},[a("div",{staticClass:"form-container"},[a("div",{staticClass:"tokens"},[a("div",{staticClass:"token"},[t._m(0),a("span",[t._v("余额")]),a("span",[t._v(t._s(t.trx))])]),a("div",{staticClass:"logos"},[a("img",{attrs:{src:n("90bd")}}),a("img",{directives:[{name:"show",rawName:"v-show",value:t.tokenInfo.tokenLogoUrl,expression:"tokenInfo.tokenLogoUrl"}],attrs:{src:t.tokenInfo.tokenLogoUrl}})]),a("div",{staticClass:"token"},[a("div",{staticClass:"symbol select",on:{click:t.openSearch}},[a("span",[t._v(t._s(t.tokenInfo.tokenSymbol||"选择代币"))]),a("img",{attrs:{src:n("716f")}})]),a("span",[t._v("余额")]),a("span",[t._v(t._s(t.token))])])]),a("div",{staticClass:"inputs"},[a("van-field",{attrs:{type:"number",placeholder:"请输入数量"},on:{input:t.inputTRX},model:{value:t.assets1,callback:function(e){t.assets1=e},expression:"assets1"}}),a("span",[t._v("+")]),a("van-field",{attrs:{type:"number",placeholder:"请输入数量"},on:{input:t.inputToken},model:{value:t.assets2,callback:function(e){t.assets2=e},expression:"assets2"}})],1),a("div",{staticClass:"rate"},[a("div",[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.rateChanged,expression:"!rateChanged"}]},[t._v("汇率 1TRX = "+t._s(t.rate)+t._s(t.tokenInfo.tokenSymbol))]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.rateChanged,expression:"rateChanged"}]},[t._v("汇率 1"+t._s(t.tokenInfo.tokenSymbol)+" = "+t._s(t.rate)+"TRX")]),a("img",{attrs:{src:n("1b07")},on:{click:t.switchRate}})]),a("span",[t._v("占资金池比例 "+t._s(t.prop))])]),a("van-button",{attrs:{type:"info"},on:{click:t.addLiquidity}},[t._v("加入")])],1),t._l(t.list,(function(e){return a("div",{key:e.address,staticClass:"your-share"},[a("div",{staticClass:"title"},[a("div",{staticClass:"text"},[a("span",[t._v("你的份额")]),a("span",[t._v(t._s(e.myShare)+"%")])]),a("div",{staticClass:"collection"},[a("van-icon",{attrs:{name:"star-o"}}),a("span",[t._v("已收藏")])],1)]),a("div",{staticClass:"tokens"},[a("div",{staticClass:"logos"},[a("img",{attrs:{src:n("90bd")}}),a("img",{attrs:{src:e.logo}})]),a("span",[t._v("TRX/"+t._s(e.symbol))])]),a("div",{staticClass:"redemption"},[a("div",{staticClass:"text"},[a("span",[t._v("TRX "+t._s(e.trx))]),a("span",[t._v(t._s(e.symbol)+" "+t._s(e.token))]),a("span",[t._v("LP权益 "+t._s(e.lp))])]),a("van-button",{attrs:{type:"info"},on:{click:function(n){t.$router.push({path:"/redemption",query:{info:JSON.stringify(e)}})}}},[t._v("赎回")])],1)])}))],2),a("search-tokens",{ref:"searchTokens",on:{select:t.select}})],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"symbol"},[n("span",[t._v("TRX")])])}],r=(n("4de4"),n("d81d"),n("a9e3"),n("b680"),n("d3b7"),n("25f0"),n("96cf"),n("1da1")),o=n("aca7"),i=n("a981"),c=n("3952"),u={components:{"mk-navbar":function(){return Promise.all([n.e("join-fund-pool~transaction"),n.e("join-fund-pool")]).then(n.bind(null,"0861"))},"search-tokens":function(){return Promise.all([n.e("join-fund-pool~transaction"),n.e("join-fund-pool")]).then(n.bind(null,"bab4"))}},data:function(){return{assets1:"",assets2:"",list:[],tokenInfo:{},trx:"--",token:"--",rate:"--",prop:"--",exTrxBalance:0,exTokenBalace:0,totalLiquidity:0,contract:null,trxInputing:!1,tokenInputing:!1,allowance:0,rateChanged:!1}},created:function(){this.$utils&&this.init()},methods:{openSearch:function(){this.$refs.searchTokens.open()},select:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,s,r,o,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.token,"TRX"!==a.tokenSymbol){n.next=3;break}return n.abrupt("return",vant.Toast.fail("请选择其它代币！"));case 3:return e.tokenInfo=a,e.contract=tronWeb.contract(i,a.address),n.next=7,e.$utils.call({contractAddress:a.tokenAddress,method:"balanceOf(address)",parameter:[{type:"address",value:e.$address}]});case 7:return e.token=n.sent.constant_result[0].decode(["uint256"]).toString().fromSun(a.tokenDecimal),n.next=10,e.$utils.call({contractAddress:"TCNYd8L5hBey9FwPpvgtvDaY2cHjMFVLZu",method:"getSingleInfo(address,address)",parameter:[{type:"address",value:e.$address},{type:"address",value:a.tokenAddress}]});case 10:s=n.sent.constant_result[0].decode(["address","uint256","uint256","uint256","uint256","uint256","uint256","uint256"],["_exchangeAddr","_allowance","_exTokenBalace","_exTrxBalance","_totalLiquidity","_userUniAmount","_userTrxAmount","_userTokenAmount"]),r=s._exTrxBalance,o=s._exTokenBalace,c=s._totalLiquidity,u=s._allowance,e.exTrxBalance=r.toString().toBN(),e.exTokenBalace=o.toString().toBN(),e.totalLiquidity=c.toString().toBN(),e.allowance=u.toString().fromSun(a.tokenDecimal),e.rate="1".toSun().toBN().multipliedBy(e.exTokenBalace).div(e.exTrxBalance).toString().fromSun(e.tokenInfo.tokenDecimal);case 20:case"end":return n.stop()}}),n)})))()},addLiquidity:function(){var t=this;if(this.trx<Number(this.assets1))return vant.Toast.fail("TRX余额不足！");if(this.token<Number(this.assets2))return vant.Toast.fail("".concat(this.tokenInfo.tokenSymbol,"余额不足！"));if(this.allowance<Number(this.assets2))return this.approve();var e=Math.floor((new Date).getTime()/1e3)+600;this.list.length>0&&this.contract.addLiquidity(this.assets1.toSun().toBN().div(this.exTrxBalance.plus(this.assets1.toSun().toBN())).multipliedBy(this.totalLiquidity).toFixed(0),this.assets1.toSun().toBN().multipliedBy(this.exTokenBalace).div(this.exTrxBalance).toFixed(0),e).send({callValue:this.assets1.toSun()}).then((function(e){return t.$loading(e)}))},approve:function(){var t=this,e=tronWeb.contract(c,this.tokenInfo.tokenAddress);e.approve(this.tokenInfo.address,this.assets2.toSun(this.tokenInfo.tokenDecimal)).send().then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$loading(n);case 2:if(a=e.sent,!a){e.next=8;break}return e.next=6,t.$utils.call({contractAddress:t.tokenInfo.tokenAddress,method:"allowance(address,address)",parameter:[{type:"address",value:t.$address},{type:"address",value:t.tokenInfo.address}]});case 6:t.allowance=e.sent.constant_result[0].decode(["uint256"]).toString().fromSun(t.tokenInfo.tokenDecimal),t.addLiquidity();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},switchRate:function(){if(!this.tokenInfo.address)return vant.Toast.fail("请先选择代币！");this.rateChanged=!this.rateChanged,this.rateChanged?this.rate="1".toSun(this.tokenInfo.tokenDecimal).toBN().multipliedBy(this.exTrxBalance).div(this.exTokenBalace).toString().fromSun().toFixed(6):this.rate="1".toSun().toBN().multipliedBy(this.exTokenBalace).div(this.exTrxBalance).toString().fromSun(this.tokenInfo.tokenDecimal)},inputTRX:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.tokenInputing){e.next=2;break}return e.abrupt("return",t.tokenInputing=!1);case 2:if(""!==t.assets1){e.next=6;break}return t.assets2="",t.prop="--",e.abrupt("return",!1);case 6:t.trxInputing=!0,n=setTimeout(Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.assets1.length>0&&(t.assets2=t.assets1.toSun().toBN().multipliedBy(t.exTokenBalace).div(t.exTrxBalance).toString().fromSun(t.tokenInfo.tokenDecimal)),clearTimeout(n);case 2:case"end":return e.stop()}}),e)}))),1e3),a=t.assets1.toSun().toBN(),t.prop="".concat(a.div(t.exTrxBalance.plus(a)).multipliedBy("100".toBN()).toString().toFixed(6),"%");case 10:case"end":return e.stop()}}),e)})))()},inputToken:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.trxInputing){e.next=2;break}return e.abrupt("return",t.trxInputing=!1);case 2:if(""!==t.assets2){e.next=6;break}return t.assets1="",t.prop="--",e.abrupt("return",!1);case 6:t.tokenInputing=!0,n=setTimeout(Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.assets2.length>0&&(t.assets1=t.assets2.toSun(t.tokenInfo.tokenDecimal).toBN().multipliedBy(t.exTrxBalance).div(t.exTokenBalace).toString().fromSun().toFixed(6)),clearTimeout(n);case 2:case"end":return e.stop()}}),e)}))),1e3),a=t.assets1.toSun().toBN(),t.prop="".concat(a.div(t.exTrxBalance.plus(a)).multipliedBy("100".toBN()).toString().toFixed(6),"%");case 10:case"end":return e.stop()}}),e)})))()},init:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a,s,r,i,c,u,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,tronWeb.trx.getBalance(t.$address);case 2:return t.trx=e.sent.fromSun(),e.next=5,Object(o["c"])(t.$address);case 5:return n=e.sent.data.liquidityList.filter((function(t){return t.jswapBalance>0})),a=n.map((function(t){return t.address})),e.next=9,t.$utils.call({contractAddress:"TCNYd8L5hBey9FwPpvgtvDaY2cHjMFVLZu",method:"getPool(address,address[])",parameter:[{type:"address",value:t.$address},{type:"address[]",value:a}]});case 9:for(s=e.sent.constant_result[0].decode(["uint256[]","uint256[]","uint256[]","uint256[]"],["_token","_trx","_uniToken","_totalsupply"]),r=s._token,i=s._trx,c=s._uniToken,u=s._totalsupply,l=[],d=0;d<a.length;d++)l.push({logo:n[d].tokenLogoUrl,symbol:n[d].tokenSymbol,token:r[d].toString().fromSun(n[d].tokenDecimal),trx:i[d].toString().fromSun(),lp:c[d].toString().fromSun(),myShare:c[d].toString().toBN().div(u[d].toString().toBN()).multipliedBy("100".toBN()).toString().toFixed(2),address:n[d].address,tokenAddress:n[d].tokenAddress,tokenDecimal:n[d].tokenDecimal});t.list=l;case 17:case"end":return e.stop()}}),e)})))()}}},l=u,d=l,p=(n("ede6"),n("2877")),v=Object(p["a"])(d,a,s,!1,null,"08f2f754",null);e["default"]=v.exports},"2be7":function(t,e,n){"use strict";n("6d69")},4797:function(t,e){},"6d69":function(t,e,n){},8397:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbarBox"},[n("mkNavbar",{attrs:{title:"关于PIN"}}),t._m(0)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AboutPin"},[a("div",[a("div",{staticClass:"title van-hairline--bottom"},[a("img",{attrs:{src:n("42d3")}}),a("i",[t._v("Pin"),a("span",[t._v("Swap")])])]),a("div",{staticClass:"content"},[a("span",[t._v("关于PIN")]),a("pre",[t._v("PinSwap Token（简称PIN），是PinSwap 平台代币，是整个系统运行和社区治理不可缺少的组成部分。\n     1、代币协议：标准TRC20\n     2、总量发行：2100万枚\n     3、创世发行：105万枚用于提供初始流动池（PIN/USDT)\n     4、挖矿产出：1995万枚\n     5、首日开盘价：1 PIN=1USDT\n     6、共识机制：POL\n注：PIN的发行量95%（1995万枚）用于拼算力挖矿产出，每挖完100万枚时产量减半，出矿每日递增10枚，约14.5年挖完。详情如下图：")]),a("table",{attrs:{border:"1",cellspacing:"0"}},[a("tr",[a("th",[t._v("矿池/万枚")]),a("th",[t._v("初日&减半"),a("br"),t._v("日产出/枚")]),a("th",[t._v("约减半周期/日")]),a("th",[t._v("当日产矿/枚")])]),a("tr",[a("td",[t._v("第100")]),a("td",[t._v("1000")]),a("td",[t._v("359")]),a("td",[t._v("4580")])]),a("tr",[a("td",[t._v("第200")]),a("td",[t._v("2290")]),a("td",[t._v("274")]),a("td",[t._v("5020")])]),a("tr",[a("td",[t._v("第300")]),a("td",[t._v("2510")]),a("td",[t._v("263")]),a("td",[t._v("5130")])]),a("tr",[a("td",[t._v("第400")]),a("td",[t._v("2565")]),a("td",[t._v("260")]),a("td",[t._v("5155")])]),a("tr",[a("td",[t._v("第500")]),a("td",[t._v("2580")]),a("td",[t._v("259")]),a("td",[t._v("5160")])]),a("tr",[a("td",[t._v("第600之后")]),a("td",[t._v("2580")]),a("td",[t._v("259")]),a("td",[t._v("5160")])])]),a("pre",[t._v("  7、挖矿公式：个人挖矿收益=（自身算力/全网算力）*当日产出；每日北京时间8点结算，7日内领取一次；\n     8、拼团算力（每日递增0.2%）\n          A: 20USDT团（初始算力200）\n          B: 50USDT团（初始算力500）\n          C: 100USDT团（初始算力1000）\n     9、销毁机制：每次拼团53%资金用于回购PIN销毁，销毁至最后21万枚，不再销毁，循环使用。")])])])])}],r=n("4797"),o=n.n(r),i=o.a,c=i,u=(n("2be7"),n("2877")),l=Object(u["a"])(c,a,s,!1,null,"6ba2b46f",null);e["default"]=l.exports},dae4:function(t,e,n){},ede6:function(t,e,n){"use strict";n("dae4")}}]);