(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["redemption"],{"0430":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-popup",{attrs:{round:"",closeable:"",position:"bottom"},on:{"click-close-icon":t.close},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{staticClass:"trading-setup"},[n("span",{staticClass:"title"},[t._v(t._s(t.$t("tradingSetup.text1")))]),n("div",{staticClass:"slippage-setting"},[n("div",{staticClass:"title"},[n("span",[t._v(t._s(t.$t("tradingSetup.text2")))]),n("div",[n("input",{attrs:{type:"number"},domProps:{value:t.value},on:{input:t.input}}),n("span",[t._v("%")])])]),n("van-slider",{attrs:{min:"1",max:"5",step:"0.5","button-size":"15","active-color":"#3C94FF","inactive-color":"#D8D8D8"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),n("div",{staticClass:"slider-items"},[n("span",[t._v("1%")]),n("span",[t._v("2%")]),n("span",[t._v("3%")]),n("span",[t._v("4%")]),n("span",[t._v("5%")])]),n("span",[t._v(t._s(t.$t("tradingSetup.text3")))])],1),n("div",{staticClass:"deadline"},[n("div",[n("span",[t._v(t._s(t.$t("tradingSetup.text4")))]),n("van-field",{attrs:{type:"number","input-align":"center"},model:{value:t.deadline,callback:function(e){t.deadline=e},expression:"deadline"}}),n("span",[t._v(t._s(t.$t("tradingSetup.text5")))])],1),n("span",[t._v(t._s(t.$t("tradingSetup.text6")))])]),n("van-button",{attrs:{type:"info"},on:{click:t.setSlipPoint}},[t._v(t._s(t.$t("tradingSetup.text7")))])],1)])},o=[],a=(n("a9e3"),{data:function(){return{value:2,deadline:10,show:!1,slipPoint:2}},methods:{open:function(){this.show=!0},setSlipPoint:function(){this.$emit("change",{slipPoint:this.slipPoint,deadline:60*Number(this.deadline)}),this.show=!1},input:function(t){this.slipPoint=t.target.value}}}),s=a,c=s,r=(n("a454"),n("2877")),u=Object(r["a"])(c,i,o,!1,null,"5087dda0",null);e["default"]=u.exports},"0d0e":function(t,e,n){"use strict";n("1630")},1630:function(t,e,n){},"1b07":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAArCAMAAAAniNp/AAACB1BMVEUAAAAAAACAgIBVVVWAgIBmZmZVVVWAgIBgYGBmZmZqampiYmJ2dnZtbW1mZmZ3d3dwcHBpaWl4eHhxcXFra2tzc3NtbW1oaGh0dHRvb29qampwcHBsbGxoaGhxcXFtbW1qampycnJubm5zc3NwcHBsbGxxcXFtbW1xcXFubm5ycnJvb29wcHBra2txcXFxcXFtbW1wcHBra2twcHBubm5sbGxvb29tbW1xcXFtbW1sbGxubm5xcXFvb29wcHBubm5vb29xcXFvb29wcHBwcHBxcXFvb29ubm5wcHBwcHBwcHBvb29ubm5ubm5vb29wcHBvb29wcHBwcHBwcHBxcXFwcHBubm5wcHBvb29wcHBvb29wcHBvb29wcHBvb29wcHBvb29vb29vb29wcHBwcHBxcXFwcHBwcHBvb29wcHBwcHBxcXFwcHBvb29wcHBvb29wcHBvb29vb29vb29vb29wcHBwcHBwcHBwcHBvb29wcHBvb29wcHBvb29wcHBvb29wcHBvb29wcHBvb29wcHBwcHBvb29vb29wcHBwcHBwcHBwcHBvb29wcHBwcHBwcHBwcHBvb29wcHBwcHBwcHBvb29wcHBvb29wcHBwcHBwcHBvb29wcHBwcHBvb29vb29wcHBvb29wcHBwcHBxcXFwcHBwcHBvb29wcHBwcHBvb29wcHBwcHCQV+RjAAAArHRSTlMAAQIDBAUGBggKDA0NDg8PEBEREhMUFRYWFxgZGhsbHB0dHh8gISIjJCUmJykrKy0vMDIyMzQ1NjY4Ozw9PkBDRUZMUlRWV1hZW2Rnb3Z3e3x9gIaKi42Njo+RkpWWl5manJ+foqOkpqipq6ytrrCxsrO1t7i4uru9vsDBwsPExcbHyczMzc7P0NPU2Nra29zd39/h4uXm5+nq7e7w8vP19vf4+fn6+/z8/f7+3+FbNgAAAe9JREFUOMuN02dXE0EUBuDZTSSKWVsMokajYAsiNuyKBUWMil1RYi+IvYuxABbAhopRFIySjBkyO++P9AOHk93N7I7329zznJlz3zmXEEctG8CPxweW6MSr6jKA4D+PzPRC+s6mE2+Hke9d46l8/mDDixGRWk68y2ccpeL1FIUigeMmP6ZCZGIP0lGlqhfYr0SB73hi72jloSJ1GYOazdR97FzoRAchSq1mY0rwpxUOtBeYZTEb+gWQb59vR3EgUjDrPgsO5POPoq5Iq+0zs13AQzbyIOKCtJUfTNocB9ZeZezebDmqeW/SlmAjEJt2jbE75VL0zKQJgzQCMRK6ydhJKXozdMYgo4iEb/06J0WLthhkDJHw1jL5dDopIKK75WRF5P+R5reicXK0atfkAorsmStFX9JnjTE0ryN9WoqSnCaMURR9zrOHpGhBF6ctwTgwJ5Lk9Pwk+XSLX3LavA9Y3c7pxaluEcRe8WwP0MFzl0LuOS3t5hzgudbpXmFW93Ig1xa2tBqAakfgNe84u2E1ZAew2fkttd1tZbbGCoF40eKFS+3n8UO4riuX+gp+VynRJobWgAr57opcU4lKVX3D8OEJPoXaPij+JnfPCPg9B9j2iSOTup+o97yr8kLGFMCfoKcqWX+q8+vA7aL3/gGiXb7ce59HPAAAAABJRU5ErkJggg=="},"1eac":function(t,e,n){"use strict";n("ab2b")},2532:function(t,e,n){"use strict";var i=n("23e7"),o=n("5a34"),a=n("1d80"),s=n("ab13");i({target:"String",proto:!0,forced:!s("includes")},{includes:function(t){return!!~String(a(this)).indexOf(o(t),arguments.length>1?arguments[1]:void 0)}})},"332e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"redemption"},[i("div",{staticClass:"box"},[i("div",{staticClass:"container"},[i("div",{staticClass:"logos"},[i("div",[i("img",{attrs:{src:t.info.logo0}}),i("img",{attrs:{src:t.info.logo1}})]),i("span",[t._v(t._s(t.info.symbol0+"/"+t.info.symbol1))])]),i("div",{staticClass:"info"},[i("div",[i("span",[t._v(t._s(t.info.symbol0))]),i("span",[t._v(t._s(t.info.amount0.toFixed(6)))])]),i("div",[i("span",[t._v(t._s(t.info.symbol1))]),i("span",[t._v(t._s(t.info.amount1.toFixed(6)))])]),i("div",[i("span",[t._v(t._s(t.$t("redemption.text2")))]),i("span",{domProps:{textContent:t._s(t.info.lp.toFixed(6))}})])]),i("div",{staticClass:"setting"},[i("span",[t._v(t._s(t.$t("redemption.text3")))]),i("span",[t._v(t._s(t.value)+"%")]),i("van-slider",{attrs:{"active-color":"#3C94FF","inactive-color":"#E4E4E4"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),i("div",{staticClass:"buttons"},[i("van-button",{attrs:{type:"info"},on:{click:function(e){t.value=25}}},[t._v("25%")]),i("van-button",{attrs:{type:"info"},on:{click:function(e){t.value=50}}},[t._v("50%")]),i("van-button",{attrs:{type:"info"},on:{click:function(e){t.value=75}}},[t._v("75%")]),i("van-button",{attrs:{type:"info"},on:{click:function(e){t.value=100}}},[t._v(t._s(t.$t("redemption.text4")))])],1)],1),i("div",{staticClass:"rate"},[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.rateToggle,expression:"!rateToggle"}]},[t._v(t._s(t.$t("redemption.text5")+" 1 "+t.info.symbol0+"≈"+t.rate+" "+t.info.symbol1))]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.rateToggle,expression:"rateToggle"}]},[t._v(t._s(t.$t("redemption.text5")+" 1 "+t.info.symbol1+"≈"+t.reRate+" "+t.info.symbol0))]),i("img",{attrs:{src:n("1b07")},on:{click:function(e){t.rateToggle=!t.rateToggle}}})]),i("div",{staticClass:"coin"},[i("img",{attrs:{src:t.info.logo0}}),i("span",[t._v(t._s(t.token0+" "+t.info.symbol0))])]),i("div",{staticClass:"coin"},[i("img",{attrs:{src:t.info.logo1}}),i("span",[t._v(t._s(t.token1+" "+t.info.symbol1))])]),i("div",{staticClass:"redemption-button"},[i("div",{staticClass:"setting",on:{click:t.openSetting}},[i("img",{attrs:{src:n("b012")}})]),i("van-button",{attrs:{type:"info"},on:{click:t.removeLiquidity}},[t._v(t._s(t.$t("redemption.text6")))])],1)])]),i("trading-setup",{ref:"tradingSetup",on:{change:t.changeDeadline}})],1)},o=[],a=(n("caad"),n("a9e3"),n("b680"),n("d3b7"),n("2532"),n("96cf"),n("1da1")),s=n("b4e9"),c=n("b9cc"),r={components:{"mk-navbar":function(){return n.e("redemption").then(n.bind(null,"0861"))},"trading-setup":function(){return n.e("redemption").then(n.bind(null,"0430"))}},data:function(){return{info:null,amount:"0",rate:"0",reRate:"0",rateToggle:!1,contract:null,allowance:"0".toBN(),value:25,token0:"0",token1:"0",deadline:600}},created:function(){var t=JSON.parse(this.$route.query.info),e=t.decimals0,n=t.decimals1,i=t.reserve0,o=t.reserve1,a=t.amount0,s=t.amount1,r=t.address,u="1".toWei(e).toBN().times(o).div(i).toFixed(0).fromWei(n),d="1".toWei(n).toBN().times(i).div(o).toFixed(0).fromWei(e);this.info=JSON.parse(this.$route.query.info),this.rate=Number(u)||"<0.000001",this.reRate=Number(d)||"<0.000001",this.contract=new this.$web3.eth.Contract(c,r),this.amount=this.info.lp.toBN().div(100).times(25).toFixed().toFixed(18),this.token0=a.toBN().div(100).times(25).toFixed().toFixed(e),this.token1=s.toBN().div(100).times(25).toFixed().toFixed(n),this.init()},methods:{openSetting:function(){this.$refs.tradingSetup.open()},changeDeadline:function(t){var e=t.deadline;this.deadline=e},init:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.contract.methods.allowance(t.$address,s["d"]).call((function(e,n){e||(t.allowance=n.fromWei(18).toBN())}));case 2:case"end":return e.stop()}}),e)})))()},approve:function(){var t=this;this.contract.methods.approve(s["d"],this.amount.toWei(18).toBN().times(10).toFixed()).send({from:this.$address}).on("transactionHash",(function(e){vant.Toast.loading({message:t.$t("transaction.text7"),forbidClick:!0,duration:0,loadingType:"spinner"})})).on("receipt",function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:vant.Toast.clear(),t.removeLiquidity();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){vant.Toast.clear(),vant.Toast.fail(t.$t("transaction.text13"))}))},removeLiquidity:function(){var t=this,e=this.info,n=e.lp,i=e.address0,o=e.address1,a=e.decimals0,c=e.decimals1,r=e.symbol0,u=e.symbol1;if(n.toBN().div(100).times(this.value).gt(this.allowance))return this.approve();if([r,u].includes(s["c"].symbol))return this.removeLiquidityETH();var d=Math.floor((new Date).getTime()/1e3)+this.deadline,l=[r,u].includes("AI")?this.$AIRouter:this.$Router;l.methods.removeLiquidity(i,o,this.amount.toWei(18),this.token0.toWei(a).toBN().times(.99).toFixed(0),this.token1.toWei(c).toBN().times(.99).toFixed(0),this.$address,d).send({from:this.$address}).on("transactionHash",(function(e){vant.Toast.loading({message:t.$t("transaction.text7"),forbidClick:!0,duration:0,loadingType:"spinner"})})).on("receipt",(function(e){vant.Toast.clear(),vant.Toast.success(t.$t("pledge.text11")),t.$router.back()})).on("error",(function(e){vant.Toast.clear(),vant.Toast.fail(t.$t("transaction.text13"))}))},removeLiquidityETH:function(){var t=this,e=Math.floor((new Date).getTime()/1e3)+this.deadline,n=this.info,i=n.symbol0,o=n.symbol1,a=Number(i!==s["c"].symbol),c=Number(!a),r=[i,o].includes("AI")?this.$AIRouter:this.$Router;r.methods.removeLiquidityETH(this.info["address".concat(c)],this.amount.toWei(18),this["token".concat(c)].toWei(this.info["decimals".concat(c)]).toBN().times(.99).toFixed(0),this["token".concat(a)].toWei(this.info["decimals".concat(a)]).toBN().times(.99).toFixed(0),this.$address,e).send({from:this.$address}).on("transactionHash",(function(e){vant.Toast.loading({message:t.$t("transaction.text7"),forbidClick:!0,duration:0,loadingType:"spinner"})})).on("receipt",(function(e){vant.Toast.clear(),vant.Toast.success(t.$t("pledge.text11")),t.$router.back()})).on("error",(function(e){vant.Toast.clear(),vant.Toast.fail(t.$t("transaction.text13"))}))}},watch:{value:function(){var t=this.info,e=t.amount0,n=t.amount1,i=t.decimals0,o=t.decimals1;this.amount=this.info.lp.toBN().div(100).times(this.value).toFixed().toFixed(18),this.token0=e.toBN().div(100).times(this.value).toFixed().toFixed(i),this.token1=n.toBN().div(100).times(this.value).toFixed().toFixed(o)}}},u=r,d=u,l=(n("1eac"),n("0d0e"),n("2877")),v=Object(l["a"])(d,i,o,!1,null,"ad33387a",null);e["default"]=v.exports},"44e7":function(t,e,n){var i=n("861d"),o=n("c6b6"),a=n("b622"),s=a("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==o(t))}},"5a34":function(t,e,n){var i=n("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},6271:function(t,e,n){},a454:function(t,e,n){"use strict";n("6271")},ab13:function(t,e,n){var i=n("b622"),o=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[o]=!1,"/./"[t](e)}catch(i){}}return!1}},ab2b:function(t,e,n){},b012:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAA7VBMVEUAAABAQEBgYGBqampwcHBmZmZqampxcXFtbW1zc3NwcHBqampvb29sbGxxcXFubm5ycnJwcHBubm5sbGxvb29tbW1wcHBubm5xcXFwcHBubm5tbW1vb29ubm5wcHBvb29xcXFwcHBvb29tbW1vb29ubm5wcHBvb29wcHBvb29ubm5xcXFvb29vb29wcHBwcHBvb29vb29wcHBwcHBvb29wcHBwcHBvb29vb29wcHBwcHBvb29vb29wcHBwcHBvb29vb29wcHBwcHBvb29vb29wcHBwcHBvb29vb29wcHBwcHBvb29vb29wcHBwcHCHo3jSAAAATnRSTlMABAgMEBQYGxwfICQnKCssLzAzNDc4Ozw/QENER0hLTE9QU1RXWFtcYGdob3N3e3+Dh4uPl5ufo6err7O3u7/Dx8vP09fb3+Pn6+/z9/vu9AgEAAADAklEQVQYGZXBi0LaZgCG4e8PkCGsVquzo4cN23Wr46iAJUgggBwCyXv/l7MQzpOofR498Wuld6+t0cPNL3qBdTMAAltrRSDsFvUMqzQj9mAUy0yIjb8oydUYmLcKPehkFDkdQuO6EwL9nI57D345LdkzCNq1uhtC30jZRkiQUYIxAy1lPdbaKUWsgLaStPEVM//0A1h0CorloKYkDr42TC6njRxUlGTMUMeYgLYSfICGjnIJsjrKnhDmddQ1uEYHLn9X5NMU7pTABe9MkvmSU8yMmT50poBjlMB+BEbtro+jWImVsG6UKOWwdqWINcMfzKZePa9n/dYc+ZM+uIrcQEWv1oFzSQPmab3aBTSlN9DSTxjiG1WgoCc+/PBh3DrVExUoqAc9W4fSXVbChtGhywnc6j6Ama196UcI3UbTAxyjfVcLmJcluwue0Z4uuHlF3o+hqj0ZH+7SipgH+Fs7n6BnFLOnBLZ2GlDVih3Q084PwrzWrqGkLWvB0GitTWC05eNqw8zpausCytqoQU5b0NBWn6G2vsJHbdQhqy1oamuAp60/4bM2XBbaGeNpIxXgaOst1LX2JqSjnRZcaa0E37UzZZZSLD2EgnbehoxtxS4XzCztlMAxihQn0Na+BkyLRkqVF/BNe6wR9M6kEdBPaZ9xgHl/EAA1HchPgKYeoGF0yFQDYrNv+h+7C1X9C0U9YZe6Q8/5bumJW7hQNqSjnzBlIqlLmNWrFaEm6Roa1smJXmadnMgjzCrySBhC4Bb1HKvkAQu419JX1tyMEp0+shLkFesHTrXaDuAxrQRnC/Bb1Zob3mkll1bE7oGj46wJNFOK5NM6YDy40FElaOq4c2jpqCEzSwmGDHVMGppK0maqNetd8Y9TreWgpCQdJoplGgsi05KlpRzUlMD4uFq68lkbnWhpgasEfwGdd9LlAoblj5/rM5jYUtGDMK/jcg6RYWUCVaNIyoHu7RQI79JK8t4ldqcV02MpvM/rOedNH+ZprZ0Dk3pWLzGF27K2WtULPfEf9L+5wL6T1UQAAAAASUVORK5CYII="},caad:function(t,e,n){"use strict";var i=n("23e7"),o=n("4d64").includes,a=n("44d2"),s=n("ae40"),c=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!c},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")}}]);