(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ai-dao"],{"044d":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return o}));n("99af"),n("d3b7"),n("96cf");var a=n("1da1"),s=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a,s,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:10,a=i.length>2&&void 0!==i[2]?i[2]:0,s=JSON.stringify({query:"query addressInfomations {\n            addressInfomations(\n                skip: ".concat(a,"\n                first: ").concat(n,'\n                where: {\n                    parent: "').concat(e,'"\n                }\n                orderDirection: desc\n            ) {\n                owner\n                buredAmount\n            }\n        }')}),t.next=5,r(s);case 5:return t.abrupt("return",t.sent.data.addressInfomations);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a,s,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:10,a=i.length>2&&void 0!==i[2]?i[2]:0,s=JSON.stringify({query:"query daoPowerEvents {\n            daoPowerEvents(\n                skip: ".concat(a,"\n                first: ").concat(n,'\n                where: {\n                    owner: "').concat(e,'"\n                }\n                orderDirection: desc\n            ) {\n                time\n                isAdd\n                amount\n                powerSource\n            }\n        }')}),t.next=5,r(s);case 5:return t.abrupt("return",t.sent.data.daoPowerEvents);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a,s,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:10,a=i.length>2&&void 0!==i[2]?i[2]:0,s=JSON.stringify({query:"query mineDrawEvents {\n            mineDrawEvents(\n                skip: ".concat(a,"\n                first: ").concat(n,'\n                where: {\n                    owner: "').concat(e,'"\n                }\n                orderDirection: desc\n            ) {\n                time\n                amount\n            }\n        }')}),t.next=5,r(s);case 5:return t.abrupt("return",t.sent.data.mineDrawEvents);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function r(t){return c.apply(this,arguments)}function c(){return c=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://minister.qytech.org:8000/subgraphs/name/ai_dao/subgraph",{cache:"reload",method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:e}).then((function(t){return t.json()}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}},"07bd":function(t,e,n){t.exports=n.p+"img/languagelogo.c356fa90.svg"},"27af":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ai-dao"},[a("span",{staticClass:"title"},[t._v("AiDAO")]),a("div",{staticClass:"header"},[a("img",{attrs:{src:n("a96a")}}),a("div",{staticClass:"languagelogo",on:{click:t.languages}},[a("img",{attrs:{src:n("07bd")}}),a("span",[t._v(t._s(t.language))]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.islanguage,expression:"islanguage"}],staticClass:"languagechoose"},[a("div",{class:t.isen?"active":"",on:{click:function(e){return t.Setlanguage("en")}}},[t._v("English")]),a("div",{class:t.isen?"":"active",on:{click:function(e){return t.Setlanguage("zh")}}},[t._v("中文")])])])]),a("div",{staticClass:"titleContent"},[a("div",{staticClass:"Contentlogo"},[a("div",{staticClass:"receive"},[a("span",[t._v(t._s(t.$t("DaoHome.text1")))]),a("div",{staticClass:"A",on:{click:function(e){return t.$router.push("/daoPickuprecord")}}},[a("span",[t._v(t._s(t.canDraw.toFixed(4)))]),a("img",{attrs:{src:n("53e6")}})]),a("van-button",{attrs:{disabled:t.canDraw.toBN().lte(0)},on:{click:t.draw}},[t._v(t._s(t.$t("DaoHome.text2")))])],1)]),a("div",{staticClass:"power"},[a("div",{on:{click:function(e){return t.$router.push("/daoPower")}}},[a("div",[a("span",[t._v(t._s(t.$t("DaoHome.text3")))]),a("img",{attrs:{src:n("53e6")}})]),a("span",[t._v(t._s(t.daoPower))])]),a("i"),a("div",{on:{click:function(e){return t.$router.push("/daoPower")}}},[a("span",[t._v(t._s(t.$t("DaoHome.text4")))]),a("span",[t._v(t._s(t.pledgePower))])])])]),a("div",{staticClass:"Button"},[a("button",{staticClass:"Joinaguild",on:{click:t.goDAO}},[t._m(0),a("span",[t._v(t._s(t.isBind?"DAO":t.$t("DaoHome.text5")))])]),a("button",{staticClass:"Receiveincome",on:{click:t.goPledge}},[t._m(1),a("span",[t._v(t._s(t.$t("DaoHome.text6")))])])]),a("div",{staticClass:"i"}),a("div",{staticClass:"DAOCommunity"},[a("span",[t._v(t._s(t.$t("DaoHome.text7")))]),a("img",{attrs:{src:n("7463"),alt:""},on:{click:function(e){t.invitationCard=!0}}})]),a("div",{staticClass:"list"},[a("div",{staticClass:"list-Titele"},[a("div",[a("span",[t._v(t._s(t.$t("DaoHome.text8")))]),a("span",[t._v(t._s(t.$t("DaoHome.text9")))])]),t._l(t.list,(function(e){return a("div",{key:e},[a("span",[t._v(t._s(e.A))]),a("span",[t._v(t._s(e.B))])])}))],2)]),a("van-overlay",{attrs:{show:t.showBind},on:{click:t.closure}},[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"Boundunion",on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"title"},[a("span",[t._v(t._s(t.$t("DaoHome.text10")))])]),a("div",{staticClass:"Bind"},[a("span",[t._v(t._s(t.$t("DaoHome.text11")))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.bindAddress,expression:"bindAddress"}],attrs:{placeholder:t.$t("DaoHome.text12")},domProps:{value:t.bindAddress},on:{input:function(e){e.target.composing||(t.bindAddress=e.target.value)}}})]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:!t.trading,expression:"!trading"}],on:{click:t.bind}},[t._v(t._s(t.$t("DaoHome.text13")))]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:t.trading,expression:"trading"}],attrs:{disabled:"",loading:"","loading-type":"spinner","loading-text":t.$t("DaoHome.text14")}})],1)])]),a("van-overlay",{attrs:{show:t.invitationCard}},[a("div",{staticClass:"invitationCard",on:{click:t.closure}},[a("div",{staticClass:"invitationCardContent",on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"White"},[a("div",{staticClass:"title"},[a("span",[t._v(t._s(t.$t("DaoHome.text15")))]),a("div",[a("i"),a("span",[t._v("Ai Dao")]),a("i",{staticClass:"ii"})])]),a("img",{staticClass:"invitationCardlogo",attrs:{src:n("837c"),alt:""}}),a("div",{staticClass:"Exclusive"},[a("div",[t._v(t._s(t.address))])]),a("div",{staticClass:"Exclusive-text"},[a("span",[t._v(t._s(t.$t("DaoHome.text16")))])]),a("div",{staticClass:"semicircle"},[a("div",{staticClass:"left"}),a("i"),a("div",{staticClass:"rigth"})]),a("div",{staticClass:"QRcodelogo"},[a("div",{ref:"qrcode",attrs:{id:"qrcode"}})]),a("div",{staticClass:"QRcode-text"},[t._v(t._s(t.$t("DaoHome.text17")))])])]),a("button",{staticClass:"button",on:{click:t.copy}},[t._v(t._s(t.$t("DaoHome.text18")))])])])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("img",{attrs:{src:n("eafd")}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("img",{attrs:{src:n("9a20")}})])}],i=(n("99af"),n("c975"),n("d81d"),n("fb6a"),n("b680"),n("96cf"),n("1da1")),o=n("79fd"),r=n.n(o),c=n("044d"),d=n("90b9"),u={data:function(){return{islanguage:!1,language:"zh"==this.$i18n.locale?"中文":"English",isen:"zh"!=this.$i18n.locale,isjoin:!1,invitationCard:!1,address:"",list:[],isBind:!1,canDraw:0,daoPower:0,pledgePower:0,showBind:!1,bindAddress:"",trading:!1}},created:function(){var t=this;this.$route.query.ai_dao&&(this.showBind=!0,this.bindAddress=this.$route.query.ai_dao),this.$i18n.locale="zh"===localStorage.getItem("language")?"zh":"en",this.$nextTick((function(){t.qrcode()})),this.$daoContracts&&this.init()},methods:{goDAO:function(){if(!this.isBind)return this.showBind=!0,!1;this.$router.push("/daoCommunity")},draw:function(){var t=this;this.$daoContracts.Mine.methods.drawPin().send({from:this.$address}).on("transactionHash",(function(e){vant.Toast.loading({message:t.$t("DaoHome.text19"),forbidClick:!0,duration:0,loadingType:"spinner"})})).on("receipt",(function(e){t.init(),vant.Toast.success(t.$t("DaoHome.text20"))})).on("error",(function(e){console.log(e),vant.Toast.fail(t.$t("DaoHome.text21"))}))},bind:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.bindAddress.length<=0)){e.next=4;break}return e.abrupt("return",vant.Toast.fail(t.$t("DaoHome.text22")));case 4:if(t.$web3.utils.isAddress(t.bindAddress)){e.next=6;break}return e.abrupt("return",vant.Toast.fail(t.$t("DaoHome.text23")));case 6:return e.next=8,t.$daoContracts.Friends.methods.parentOf(t.bindAddress).call({from:t.$address});case 8:if(n=e.sent,!n.toBN().lte(0)){e.next=11;break}return e.abrupt("return",vant.Toast.fail(t.$t("DaoHome.text23")));case 11:a=t.$daoContracts.Friends.methods.makeRelation(t.bindAddress),a.call({from:t.$address},(function(e,n){e||a.send({from:t.$address}).on("transactionHash",(function(e){t.trading=!0})).on("receipt",(function(e){vant.Toast.success(t.$t("DaoHome.text24")),t.trading=!1,t.showBind=!1,t.isBind=!0})).on("error",(function(e){t.trading=!1}))}));case 13:case"end":return e.stop()}}),e)})))()},init:function(){var t=this;this.$daoContracts.Mine.methods.todayReleaseValue().call({from:this.$address},(function(t,e){t||console.log("今日出矿：",e.fromWei())})),Object(d["a"])(this.$web3).then((function(e){console.log("当前时间：",t.$toTime(e,"Y/M/D H:i"))})),this.address=this.$address;var e=new this.$web3.BatchRequest;e.add(this.$daoContracts.Friends.methods.parentOf(this.$address).call.request({from:this.$address})),e.add(this.$daoContracts.Mine.methods.drawPin().call.request({from:this.$address})),e.add(this.$daoContracts.Mine.methods.mineInfo().call.request({from:this.$address})),e.add(this.$daoContracts.Pledge.methods.getMinerInfo(0).call.request({from:this.$address})),e.add(this.$daoContracts.Shareholders.methods.pledgeInfo(this.$address).call.request({from:this.$address})),e.requestManager.sendBatch(e.requests,(function(e,n){if(!e){var a=(n[0].result||n[0]).decode(["address"]),s=n[2].result.decode([{name:"myPower",type:"uint256"},{name:"mined",type:"uint256"}]),i=s.myPower,o=n[3].result.decode([{name:"pledgeLp",type:"uint256"},{name:"gainPower",type:"uint256"}]),r=o.gainPower,c=n[4].result.decode([{name:"lpAmount",type:"uint256"},{name:"totalPower",type:"uint256"},{name:"lpAmountPerUSD",type:"uint256"},{name:"lpAmountPerPIN",type:"uint256"}]),d=c.totalPower;t.isBind=a.toBN().gt(0),t.canDraw=n[1].result.decode(["uint256"]).fromWei(),t.daoPower=i,t.pledgePower=r.toBN().plus(d).toFixed()}})),Object(c["a"])(this.$address).then((function(e){t.list=e.map((function(t){return{A:"0x...".concat(t.owner.slice(-6)),B:t.buredAmount.fromWei().toFixed(4)}}))}))},goPledge:function(){this.$router.push("/daoPledgeInfo")},closure:function(){this.bindAddress="",this.invitationCard=!1,this.showBind=!1},qrcode:function(){new r.a("qrcode",{width:100,height:100,text:"".concat(location.href.slice(0,location.href.indexOf("#")),"#/ai-dao?ai_dao=").concat(this.$address),colorDark:"#062754"})},copy:function(){var t=this,e="".concat(location.href.slice(0,location.href.indexOf("#")),"#/ai-dao?ai_dao=").concat(this.$address);this.$copyText(e).then((function(e){vant.Toast.success(t.$t("DaoHome.text25"))}),(function(e){vant.Toast.fail(t.$t("DaoHome.text26"))}))},languages:function(){this.islanguage=!this.islanguage},Setlanguage:function(t){localStorage.setItem("language",t),this.$i18n.locale=t,"zh"==this.$i18n.locale?(this.isen=!1,this.language="中文"):(this.isen=!0,this.language="English")}}},l=u,v=l,h=(n("efcc"),n("2877")),f=Object(h["a"])(v,a,s,!1,null,"01aa394d",null);e["default"]=f.exports},"53e6":function(t,e,n){t.exports=n.p+"img/leftarrow.70e9cb2a.svg"},7463:function(t,e,n){t.exports=n.p+"img/Addwell.cea35323.svg"},"837c":function(t,e,n){t.exports=n.p+"img/invitationCardlogo.94ba1992.svg"},8413:function(t,e,n){},"9a20":function(t,e,n){t.exports=n.p+"img/minaddwell.bec548cb.svg"},a96a:function(t,e,n){t.exports=n.p+"img/ailogo1.f2ab8df1.svg"},d81d:function(t,e,n){"use strict";var a=n("23e7"),s=n("b727").map,i=n("1dde"),o=n("ae40"),r=i("map"),c=o("map");a({target:"Array",proto:!0,forced:!r||!c},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},eafd:function(t,e,n){t.exports=n.p+"img/Rightarrow.461fe9d2.svg"},efcc:function(t,e,n){"use strict";n("8413")}}]);